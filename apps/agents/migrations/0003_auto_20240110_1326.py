# Generated by Django 5.0.1 on 2024-01-03 22:49
from django.db import migrations


def convert_to_sprite_name(name):
    return name.replace(" ", "_")


def load_agent_data(apps, schema_editor):
    Agent = apps.get_model("agents", "Agent")
    Simulation = apps.get_model("simulations", "Simulation")

    agent_data = [
        "Abigail Chen",
        "Adam Smith",
        "Arthur Burton",
        "Ayesha Khan",
        "Carlos Gomez",
        "Carmen Ortiz",
        "Eddy Lin",
        "Francisco Lopez",
        "Giorgio Rossi",
        "Hailey Johnson",
        "Isabella Rodriguez",
        "Jane Moreno",
        "Jennifer Moore",
        "John Lin",
        "Klaus Mueller",
        "Latoya Williams",
        "Maria Lopez",
        "Mei Lin",
        "Rajiv Patel",
        "Ryan Park",
        "Sam Moore",
        "Tamara Taylor",
        "Tom Moreno",
        "Wolfgang Schulz",
        "Yuriko Yamamoto",
    ]

    # The space we need for 25 agents
    offset = 2
    x, y = (68, 58)
    s = set()
    for i in range(x - offset, x + offset + 1):
        for j in range(y - offset, y + offset + 1):
            s.add((i, j))

    for name in agent_data:
        sprite_name = convert_to_sprite_name(name)
        x, y = s.pop()

        Agent.objects.create(
            name=name,
            sprite_name=sprite_name,
            curr_position_x=x,
            curr_position_y=y,
            simulation=Simulation.objects.first(),
        )


def revert_load_agent_data(apps, schema_editor):
    Agent = apps.get_model("agents", "Agent")
    Agent.objects.all().delete()


class Migration(migrations.Migration):
    dependencies = [
        ("agents", "0002_initial"),
        ("simulations", "0002_auto_20240110_1325"),
    ]

    operations = [
        migrations.RunPython(load_agent_data, revert_load_agent_data),
    ]
